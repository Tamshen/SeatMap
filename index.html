<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>桌位布局设计器</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="app">
    <header class="topbar">
      <div class="controls">
        <label>总桌数 <input id="totalTables" type="number" min="1" value="10"></label>
        <label>每桌座位数 <input id="seatsPerTable" type="number" min="1" value="10"></label>
        <label>排列模式 (逗号分隔，例如: 1,3,3,3) <input id="rowPattern" type="text" value="1,3,3,3"></label>
        <button id="generateBtn">生成布局</button>
      </div>

      <div class="save-controls">
        <select id="configSelect">
          <option value="">选择配置...</option>
        </select>
        <button id="saveConfigBtn">保存到本地</button>
        <button id="saveAsConfigBtn">另存为</button>
        <button id="deleteConfigBtn">删除配置</button>
        <button id="exportBtn">导出配置</button>
        <input id="importFile" type="file" accept=".json" style="display:none">
        <button id="importBtnJson">导入配置</button>
        <button id="exportCsvBtn">导出 CSV (座位明细)</button>
        <button id="exportCsvByTableBtn">导出 CSV (按桌汇总)</button>
        <button id="exportImageBtn" class="export-control-btn">导出图片</button>
        <button id="printBtn" class="export-control-btn">打印布局</button>
      </div>
    </header>

    <main class="main">
      <aside class="left">
        <h3>人员名单</h3>

        <textarea id="peopleInput" placeholder="每行一个姓名，输入完毕点击导入！或点击上传上传txt 或 csv。"></textarea>
        <div class="left-actions">
          <button id="importBtn">导入</button>
          <input id="importFile" type="file" accept=".csv,.txt" style="display:none">
          <button id="importFileBtn">上传</button>
          <button id="clearPeople">清空</button>
        </div>

        <div class="search-container">
          <input type="text" id="unassignedSearch" placeholder="搜索未分配人员...">
        </div>

        <div class="peopleList" id="peopleList"></div>
      </aside>

      <section class="canvasWrap">
        <div class="canvas" id="canvas" tabindex="0">
          <div class="inner" id="inner">
            <!-- tables will be generated here -->
          </div>
          <!-- canvas controls overlay -->
          <div class="canvas-controls-overlay">
            <div class="canvas-controls-group">
              <label class="zoom-control">缩放 <input id="zoomRange" type="range" min="0.3" max="2" step="0.05"
                  value="1"></label>
              <div id="zoomDisplay" class="zoom-display">100%</div>
              <button id="resetView" class="canvas-control-btn">重置视图</button>
            </div>
          </div>
        </div>

          <div class="hint">提示：滚轮缩放，按住空格或右键拖动画布平移，拖拽人员到座位上放置。可以对着桌名右键可以编辑桌名和清空。</div>

        
      </section>

      <aside class="right">
        <h3>已分配</h3>
        <div class="search-container">
          <input type="text" id="assignedSearch" placeholder="搜索已分配人员...">
        </div>
        <div id="assignedList" class="assignedList"></div>
      </aside>
    </main>
  </div>

  <!-- 通用提示框 -->
  <div id="notificationContainer" class="notification-container"></div>
  


      <aside class="right">
        <h3>已分配</h3>
        <div class="search-container">
          <input type="text" id="assignedSearch" placeholder="搜索已分配人员...">
        </div>
        <div id="assignedList" class="assignedList"></div>
      </aside>
    </main>
  </div>

  <!-- 通用提示框 -->
  <div id="notificationContainer" class="notification-container"></div>

  <!-- custom context menu for seats -->
  <div id="contextMenu" class="context-menu" style="display:none">
    <div class="cm-item" data-action="focus">定位到座位</div>
    <div class="cm-item" data-action="unassign">取消分配</div>
  </div>
  
  <!-- custom context menu for tables -->
  <div id="tableContextMenu" class="context-menu" style="display:none">
    <div class="cm-item" data-action="renameTable">修改桌名</div>
    <div class="cm-item" data-action="clearTable">清除该桌名单</div>
  </div>
  

  <!-- html2canvas 用于将 DOM 转为图片（允许导出/打印） -->
  <script src="./js/html2canvas.min.js"></script>
  <script src="./js/app.js"></script>
</body>

</html>